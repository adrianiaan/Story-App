/*! For license information please see app~73692912.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkstory_app=self.webpackChunkstory_app||[]).push([[89],{265:(t,n,e)=>{e.d(n,{A:()=>u});var r=e(869),i=e(693);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==o(n)?n:n+""}const u=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._storiesContainer=null,this._mapContainer=null},(n=[{key:"redirectToLogin",value:function(){window.location.hash="#/login"}},{key:"getTemplate",value:function(){return'\n      <div class="content container">\n        <h2 class="content__heading">Cerita Terbaru</h2>\n        \n        \x3c!-- Tambahkan container untuk peta --\x3e\n        <div class="map-section">\n          <h3>Peta Lokasi Cerita</h3>\n          <div id="storiesMap" class="stories-map"></div>\n        </div>\n        \n        <div id="stories" class="stories">\n        </div>\n        <div class="add-story-button">\n          <a href="#/add" class="btn btn-primary">Tambah Cerita</a>\n        </div>\n      </div>\n    '}},{key:"initElements",value:function(){this._storiesContainer=document.querySelector("#stories"),this._mapContainer=document.querySelector("#storiesMap")}},{key:"showLoading",value:function(){this._storiesContainer.innerHTML='<div class="story-item__not-found">Memuat cerita...</div>'}},{key:"showStories",value:function(t){var n=this;this._storiesContainer.innerHTML="",t.length>0?t.forEach((function(t){n._storiesContainer.innerHTML+=(0,r.jk)(t)})):this._storiesContainer.innerHTML='<div class="story-item__not-found">Tidak ada cerita yang ditemukan</div>'}},{key:"showStoriesMap",value:function(t){var n=t.filter((function(t){return t.lat&&t.lon}));n.length>0?(this._mapContainer.style.display="block",(0,i.KH)("storiesMap",n)):this._mapContainer.style.display="none"}},{key:"showError",value:function(t){this._storiesContainer.innerHTML='<div class="story-item__not-found">'.concat(t,"</div>"),this._mapContainer.style.display="none"}}])&&a(t.prototype,n),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}()},335:(t,n,e)=>{e.d(n,{A:()=>s});var r=e(869);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var n=function(t,n){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==i(n)?n:n+""}const s=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=null},(n=[{key:"redirectToLogin",value:function(){window.location.hash="#/login"}},{key:"getTemplate",value:function(){return'\n      <div class="content container">\n        <h2 class="content__heading">Cerita Tersimpan</h2>\n        <div id="saved-stories" class="stories">\n        </div>\n      </div>\n    '}},{key:"initElements",value:function(){this._container=document.querySelector("#saved-stories")}},{key:"showLoading",value:function(){this._container.innerHTML='<div class="story-item__not-found">Memuat cerita tersimpan...</div>'}},{key:"showStories",value:function(t){var n=this;this._container.innerHTML="",t.length>0?t.forEach((function(t){var e=document.createElement("div");e.innerHTML=(0,r.jk)(t);var i=document.createElement("button");i.className="btn-remove-saved",i.setAttribute("data-id",t.id),i.innerHTML='<i class="fas fa-trash"></i> Hapus',i.style.marginTop="10px";var o=e.querySelector(".story-item");o.querySelector(".story-item__content").appendChild(i),n._container.appendChild(o)})):this._container.innerHTML='<div class="story-item__not-found">Belum ada cerita tersimpan</div>'}},{key:"showError",value:function(t){this._container.innerHTML='<div class="story-item__not-found">'.concat(t,"</div>")}},{key:"bindRemoveSavedStory",value:function(t){this._container.addEventListener("click",(function(n){if(n.target.classList.contains("btn-remove-saved")||n.target.closest(".btn-remove-saved")){var e=(n.target.classList.contains("btn-remove-saved")?n.target:n.target.closest(".btn-remove-saved")).getAttribute("data-id");e&&t&&t(e)}}))}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}()},414:(t,n,e)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var n=function(t,n){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,n||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==r(n)?n:n+""}e.d(n,{A:()=>a});const a=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=document.querySelector("#main-content")},(n=[{key:"render",value:function(){this._container.innerHTML='\n      <div class="container">\n        <div class="not-found-page">\n          <h2 class="not-found-title">404 - Halaman Tidak Ditemukan</h2>\n          <div class="not-found-image">\n            <i class="fas fa-exclamation-triangle fa-5x"></i>\n          </div>\n          <p class="not-found-description">Maaf, halaman yang Anda cari tidak ditemukan.</p>\n          <a href="#/" class="btn btn-primary">Kembali ke Beranda</a>\n        </div>\n      </div>\n    '}}])&&i(t.prototype,n),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}()},523:(t,n,e)=>{e.d(n,{A:()=>u});var r=e(869),i=e(693);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==o(n)?n:n+""}const u=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._storyContainer=null,this._mapContainer=null,this._bookmarkButton=null,this._onBookmarkClick=null,this._mapInstance=null},(n=[{key:"redirectToLogin",value:function(){window.location.hash="#/login"}},{key:"getTemplate",value:function(){return'\n      <div class="container">\n        <div id="story" class="story"></div>\n        <div id="storyMap" class="story-map"></div>\n      </div>\n    '}},{key:"initElements",value:function(){this._storyContainer=document.querySelector("#story"),this._mapContainer=document.querySelector("#storyMap")}},{key:"showLoading",value:function(){this._storyContainer.innerHTML='<div class="story__not-found">Memuat cerita...</div>'}},{key:"showStory",value:function(t,n){this._storyContainer.innerHTML=(0,r.Ze)(t)+this._createBookmarkButton(n),this._bookmarkButton=this._storyContainer.querySelector("#bookmark-button"),this._bindBookmarkClick(),t.lat&&t.lon?(this._mapContainer.style.display="block",this._mapInstance&&this._mapInstance.remove(),this._mapInstance=(0,i.vU)("storyMap",[t.lat,t.lon],t.name,!0)):(this._mapContainer.style.display="none",this._mapInstance&&(this._mapInstance.remove(),this._mapInstance=null))}},{key:"_createBookmarkButton",value:function(t){return'\n    <div class="bookmark-container">\n      <button id="bookmark-button" class="bookmark-btn" aria-label="Simpan Cerita" title="Simpan Cerita">\n        <i class="'.concat(t?"fas":"far",' fa-bookmark"></i>\n        <span class="bookmark-text">').concat(t?"Tersimpan":"Simpan","</span>\n      </button>\n    </div>\n  ")}},{key:"_bindBookmarkClick",value:function(){var t=this;this._bookmarkButton&&this._bookmarkButton.addEventListener("click",(function(){t._onBookmarkClick&&t._onBookmarkClick()}))}},{key:"bindBookmarkClick",value:function(t){this._onBookmarkClick=t}},{key:"showError",value:function(t){this._storyContainer.innerHTML='<div class="story__not-found">'.concat(t,"</div>"),this._mapContainer.style.display="none",this._mapInstance&&(this._mapInstance.remove(),this._mapInstance=null)}}])&&a(t.prototype,n),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}()},591:(t,n,e)=>{e.d(n,{A:()=>s});var r=e(869);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var n=function(t,n){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==i(n)?n:n+""}const s=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._registerForm=null,this._nameInput=null,this._emailInput=null,this._passwordInput=null},(n=[{key:"redirectToLogin",value:function(){window.location.hash="#/login"}},{key:"getTemplate",value:function(){return'\n      <div class="container">\n        '.concat((0,r.KI)(),"\n      </div>\n    ")}},{key:"initElements",value:function(){this._registerForm=document.getElementById("registerForm"),this._nameInput=document.getElementById("name"),this._emailInput=document.getElementById("email"),this._passwordInput=document.getElementById("password")}},{key:"setupRegisterForm",value:function(t){var n=this;this._registerForm.addEventListener("submit",(function(e){e.preventDefault();var r=n._nameInput.value,i=n._emailInput.value,o=n._passwordInput.value;t({name:r,email:i,password:o})}))}},{key:"showErrorMessage",value:function(t){alert(t)}},{key:"showSuccessMessage",value:function(t){alert(t)}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}()},593:(t,n,e)=>{e.d(n,{A:()=>s});var r=e(869);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var n=function(t,n){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==i(n)?n:n+""}const s=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._loginForm=null,this._emailInput=null,this._passwordInput=null},(n=[{key:"goToHomePage",value:function(){window.location.hash="#/"}},{key:"getTemplate",value:function(){return'\n      <div class="container">\n        '.concat((0,r.mP)(),"\n      </div>\n    ")}},{key:"initElements",value:function(){this._loginForm=document.getElementById("loginForm"),this._emailInput=document.getElementById("email"),this._passwordInput=document.getElementById("password")}},{key:"setupLoginForm",value:function(t){var n=this;this._loginForm.addEventListener("submit",(function(e){e.preventDefault();var r=n._emailInput.value,i=n._passwordInput.value;t({email:r,password:i})}))}},{key:"showErrorMessage",value:function(t){alert(t)}},{key:"showSuccessMessage",value:function(t){alert(t)}}])&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}()},695:(t,n,e)=>{e.d(n,{A:()=>f});var r=e(869),i=e(693);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){a=function(){return n};var t,n={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,n,e,r){return Object.defineProperty(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function f(n,e,r,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype);return l(a,"_invoke",function(n,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=E(s,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var c=h(n,e,r);if("normal"===c.type){if(i=r.done?4:2,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=4,r.method="throw",r.arg=c.arg)}}}(n,r,new T(i||[])),!0),a}function h(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var p={};function d(){}function v(){}function m(){}var y={};l(y,s,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(x([])));g&&g!==e&&r.call(g,s)&&(y=g);var k=m.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function _(t,n){function e(i,a,s,u){var c=h(t[i],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==o(f)&&r.call(f,"__await")?n.resolve(f.__await).then((function(t){e("next",t,s,u)}),(function(t){e("throw",t,s,u)})):n.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return e("throw",t,s,u)}))}u(c.arg)}var i;l(this,"_invoke",(function(t,r){function o(){return new n((function(n,i){e(t,r,n,i)}))}return i=i?i.then(o,o):o()}),!0)}function E(n,e){var r=e.method,i=n.i[r];if(i===t)return e.delegate=null,"throw"===r&&n.i.return&&(e.method="return",e.arg=t,E(n,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(i,n.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[n.r]=a.value,e.next=n.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){this.tryEntries.push(t)}function P(n){var e=n[4]||{};e.type="normal",e.arg=t,n[4]=e}function T(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function x(n){if(null!=n){var e=n[s];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var i=-1,a=function e(){for(;++i<n.length;)if(r.call(n,i))return e.value=n[i],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(o(n)+" is not iterable")}return v.prototype=m,l(k,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===v||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},n.awrap=function(t){return{__await:t}},w(_.prototype),l(_.prototype,u,(function(){return this})),n.AsyncIterator=_,n.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var a=new _(f(t,e,r,i),o);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(k),l(k,c,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}},n.values=x,T.prototype={constructor:T,reset:function(n){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!n)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t){a.type="throw",a.arg=n,e.next=t}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],s=this.prev,u=o[1],c=o[2];if(-1===o[0])return r("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<u)return this.method="next",this.arg=t,r(u),!0;if(s<c)return r(c),!1}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===t||"continue"===t)&&i[0]<=n&&n<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i[2],p):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[2]===t)return this.complete(e[4],e[3]),P(e),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[0]===t){var r=e[4];if("throw"===r.type){var i=r.arg;P(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(n,e,r){return this.delegate={i:x(n),r:e,n:r},"next"===this.method&&(this.arg=t),p}},n}function s(t,n,e,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void e(t)}s.done?n(u):Promise.resolve(u).then(r,i)}function u(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){s(o,r,i,a,u,"next",t)}function u(t){s(o,r,i,a,u,"throw",t)}a(void 0)}))}}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var n=function(t,n){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==o(n)?n:n+""}const f=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._map=null,this._marker=null,this._stream=null,this._photoBlob=null,this._addStoryForm=null,this._descriptionInput=null,this._photoInput=null,this._cameraPreview=null,this._photoCanvas=null,this._startCameraButton=null,this._capturePhotoButton=null,this._retakePhotoButton=null,this._photoPreview=null},n=[{key:"redirectToLogin",value:function(){window.location.hash="#/login"}},{key:"goToHomePage",value:function(){window.location.hash="#/"}},{key:"getTemplate",value:function(){return'\n      <div class="content container">\n        '.concat((0,r.NI)(),"\n      </div>\n    ")}},{key:"initElements",value:function(){this._addStoryForm=document.getElementById("addStoryForm"),this._descriptionInput=document.getElementById("description"),this._photoInput=document.getElementById("photo"),this._cameraPreview=document.getElementById("cameraPreview"),this._photoCanvas=document.getElementById("photoCanvas"),this._startCameraButton=document.getElementById("startCamera"),this._capturePhotoButton=document.getElementById("capturePhoto"),this._retakePhotoButton=document.getElementById("retakePhoto"),this._photoPreview=document.getElementById("photoPreview");var t=(0,i.Gb)("addStoryMap"),n=t.map,e=t.marker;this._map=n,this._marker=e}},{key:"setupCameraFunctionality",value:function(){var t=this;this._startCameraButton.addEventListener("click",u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});case 3:t._stream=n.sent,t._cameraPreview.srcObject=t._stream,t._cameraPreview.style.display="block",t._startCameraButton.disabled=!0,t._capturePhotoButton.disabled=!1,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),t.showErrorMessage("Tidak dapat mengakses kamera: "+n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))),this._capturePhotoButton.addEventListener("click",(function(){var n=t._photoCanvas.getContext("2d");t._photoCanvas.width=t._cameraPreview.videoWidth,t._photoCanvas.height=t._cameraPreview.videoHeight,n.drawImage(t._cameraPreview,0,0,t._photoCanvas.width,t._photoCanvas.height),t._photoCanvas.toBlob((function(n){t._photoBlob=n;var e=URL.createObjectURL(n);t._photoPreview.innerHTML='<img src="'.concat(e,'" alt="Preview foto">'),t.stopCameraStream(),t._cameraPreview.style.display="none",t._capturePhotoButton.disabled=!0,t._retakePhotoButton.style.display="inline-block";var r=new File([n],"photo.jpg",{type:"image/jpeg"}),i=new DataTransfer;i.items.add(r),t._photoInput.files=i.files}),"image/jpeg")})),this._retakePhotoButton.addEventListener("click",(function(){t._photoPreview.innerHTML="",t._retakePhotoButton.style.display="none",t._startCameraButton.disabled=!1,t._photoInput.value="",t._photoBlob=null})),this._photoInput.addEventListener("change",(function(n){if(n.target.files&&n.target.files[0]){var e=n.target.files[0],r=URL.createObjectURL(e);t._photoPreview.innerHTML='<img src="'.concat(r,'" alt="Preview foto">')}}))}},{key:"stopCameraStream",value:function(){this._stream&&(this._stream.getTracks().forEach((function(t){return t.stop()})),this._stream=null)}},{key:"setupFormSubmission",value:function(t){var n=this;this._addStoryForm.addEventListener("submit",function(){var e=u(a().mark((function e(r){var i,o,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),i=n._descriptionInput.value,o=n._photoInput.files[0]||n._photoBlob,s=n._marker.getLatLng(),i&&o){e.next=7;break}return n.showErrorMessage("Deskripsi dan foto harus diisi"),e.abrupt("return");case 7:(u=new FormData).append("description",i),u.append("photo",o),s&&(u.append("lat",s.lat),u.append("lon",s.lng)),t(u);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"showErrorMessage",value:function(t){alert(t)}},{key:"showSuccessMessage",value:function(t){alert(t)}},{key:"cleanUp",value:function(){this.stopCameraStream()}}],n&&c(t.prototype,n),e&&c(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}()},929:(t,n,e)=>{e.d(n,{A:()=>l});var r=e(448);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(){o=function(){return n};var t,n={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,n,e,r){return Object.defineProperty(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function f(n,e,r,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype);return l(a,"_invoke",function(n,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=E(s,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var c=h(n,e,r);if("normal"===c.type){if(i=r.done?4:2,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=4,r.method="throw",r.arg=c.arg)}}}(n,r,new T(i||[])),!0),a}function h(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var p={};function d(){}function v(){}function m(){}var y={};l(y,s,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(x([])));g&&g!==e&&r.call(g,s)&&(y=g);var k=m.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function _(t,n){function e(o,a,s,u){var c=h(t[o],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&r.call(f,"__await")?n.resolve(f.__await).then((function(t){e("next",t,s,u)}),(function(t){e("throw",t,s,u)})):n.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return e("throw",t,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(t,r){function i(){return new n((function(n,i){e(t,r,n,i)}))}return o=o?o.then(i,i):i()}),!0)}function E(n,e){var r=e.method,i=n.i[r];if(i===t)return e.delegate=null,"throw"===r&&n.i.return&&(e.method="return",e.arg=t,E(n,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(i,n.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[n.r]=a.value,e.next=n.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){this.tryEntries.push(t)}function P(n){var e=n[4]||{};e.type="normal",e.arg=t,n[4]=e}function T(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function x(n){if(null!=n){var e=n[s];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,a=function e(){for(;++o<n.length;)if(r.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(i(n)+" is not iterable")}return v.prototype=m,l(k,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===v||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},n.awrap=function(t){return{__await:t}},w(_.prototype),l(_.prototype,u,(function(){return this})),n.AsyncIterator=_,n.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var a=new _(f(t,e,r,i),o);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(k),l(k,c,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}},n.values=x,T.prototype={constructor:T,reset:function(n){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!n)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t){a.type="throw",a.arg=n,e.next=t}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],s=this.prev,u=o[1],c=o[2];if(-1===o[0])return r("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<u)return this.method="next",this.arg=t,r(u),!0;if(s<c)return r(c),!1}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===t||"continue"===t)&&i[0]<=n&&n<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i[2],p):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[2]===t)return this.complete(e[4],e[3]),P(e),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[0]===t){var r=e[4];if("throw"===r.type){var i=r.arg;P(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(n,e,r){return this.delegate={i:x(n),r:e,n:r},"next"===this.method&&(this.arg=t),p}},n}function a(t,n,e,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void e(t)}s.done?n(u):Promise.resolve(u).then(r,i)}function s(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function s(t){a(o,r,i,s,u,"next",t)}function u(t){a(o,r,i,s,u,"throw",t)}s(void 0)}))}}function u(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var n=function(t,n){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==i(n)?n:n+""}const l=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._presenter=null},n=[{key:"setPresenter",value:function(t){this._presenter=t}},{key:"getTemplate",value:function(){return'\n      <div class="container">\n        <div class="about-page">\n          <div class="about-header">\n            <i class="fas fa-book-open about-icon"></i>\n            <h2>Tentang Story App</h2>\n          </div>\n          \n          <div class="about-section">\n            <h3><i class="fas fa-info-circle"></i> Deskripsi Aplikasi</h3>\n            <p>Story App adalah aplikasi berbagi cerita sederhana yang memungkinkan pengguna untuk berbagi momen spesial mereka dengan komunitas. Dengan antarmuka yang intuitif dan fitur yang mudah digunakan, Story App menjadi platform ideal untuk berbagi pengalaman Anda.</p>\n            \n            <div class="feature-cards">\n              <div class="feature-card">\n                <i class="fas fa-edit"></i>\n                <h4>Membuat Cerita</h4>\n                <p>Bagikan cerita Anda dengan foto yang menarik</p>\n              </div>\n              \n              <div class="feature-card">\n                <i class="fas fa-map-marker-alt"></i>\n                <h4>Tambahkan Lokasi</h4>\n                <p>Tandai lokasi di mana cerita Anda terjadi</p>\n              </div>\n              \n              <div class="feature-card">\n                <i class="fas fa-users"></i>\n                <h4>Jelajahi Cerita</h4>\n                <p>Temukan dan nikmati cerita dari pengguna lain</p>\n              </div>\n            </div>\n          </div>\n          \n          \x3c!-- Tambahkan bagian untuk notifikasi --\x3e\n          <div class="about-section notification-section">\n            <h3><i class="fas fa-bell"></i> Notifikasi</h3>\n            <p>Dapatkan pemberitahuan tentang cerita baru yang dibagikan.</p>\n            \n            <div class="notification-controls">\n              <button id="notificationBtn" class="btn btn-primary">\n                <i class="fas fa-bell"></i> <span id="notificationBtnText">Aktifkan Notifikasi</span>\n              </button>\n              <p id="notificationStatus" class="notification-status"></p>\n            </div>\n          </div>\n\n          <div class="about-section">\n            <h3><i class="fas fa-code"></i> Teknologi yang Digunakan</h3>\n            <div class="tech-stack">\n              <div class="tech-item">\n                <i class="fab fa-html5"></i>\n                <span>HTML5</span>\n              </div>\n              <div class="tech-item">\n                <i class="fab fa-css3-alt"></i>\n                <span>CSS3</span>\n              </div>\n              <div class="tech-item">\n                <i class="fab fa-js"></i>\n                <span>JavaScript</span>\n              </div>\n              <div class="tech-item">\n                <i class="fab fa-box"></i>\n                <span>Webpack</span>\n              </div>\n              <div class="tech-item">\n                <i class="fas fa-map"></i>\n                <span>Leaflet</span>\n              </div>\n              <div class="tech-item">\n                <i class="fas fa-camera"></i>\n                <span>Web Camera API</span>\n              </div>\n            </div>\n          </div>      \n        </div>\n      </div>\n    '}},{key:"afterRender",value:(f=s(o().mark((function t(){var n,e=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.getElementById("notificationBtn")).addEventListener("click",s(o().mark((function t(){var r,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.disabled=!0,t.next=4,e._presenter.toggleNotification();case 4:r=t.sent,i=document.getElementById("notificationBtnText"),a=document.getElementById("notificationStatus"),r.success?(e._updateNotificationUI(r.subscribed,i,a),a.textContent=r.message):(a.textContent=r.message,a.classList.add("notification-error"));case 8:return t.prev=8,n.disabled=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])}))));case 2:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"updateNotificationStatus",value:(l=s(o().mark((function t(n){var e,r,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.getElementById("notificationBtn"),r=document.getElementById("notificationBtnText"),i=document.getElementById("notificationStatus"),n&&n.token){t.next=8;break}return e.disabled=!0,i.textContent="Anda harus login untuk mengaktifkan notifikasi",i.classList.add("notification-warning"),t.abrupt("return");case 8:if("Notification"in window){t.next=13;break}return e.disabled=!0,i.textContent="Browser Anda tidak mendukung notifikasi",i.classList.add("notification-error"),t.abrupt("return");case 13:return t.next=15,this.isNotificationSubscribed();case 15:a=t.sent,this._updateNotificationUI(a,r,i);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"isNotificationSubscribed",value:(c=s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.A.isPushNotificationSubscribed());case 1:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"subscribeNotification",value:(a=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.A.subscribePushNotif(n));case 1:case"end":return t.stop()}}),t)}))),function(t){return a.apply(this,arguments)})},{key:"unsubscribeNotification",value:(i=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.A.unsubscribePushNotif(n));case 1:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"_updateNotificationUI",value:function(t,n,e){t?(n.textContent="Nonaktifkan Notifikasi",e.textContent="Notifikasi aktif",e.classList.add("notification-active"),e.classList.remove("notification-inactive","notification-error","notification-warning")):(n.textContent="Aktifkan Notifikasi",e.textContent="Notifikasi tidak aktif",e.classList.add("notification-inactive"),e.classList.remove("notification-active","notification-error","notification-warning"))}}],n&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,i,a,c,l,f}()}}]);