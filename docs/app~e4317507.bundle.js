/*! For license information please see app~e4317507.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkstory_app=self.webpackChunkstory_app||[]).push([[74],{238:(t,e,r)=>{r.d(e,{A:()=>c});var n=r(730);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function p(e,r,n,o){var i=r&&r.prototype instanceof d?r:d,a=Object.create(i.prototype);return l(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=x(s,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new A(o||[])),!0),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f={};function d(){}function g(){}function v(){}var y={};l(y,s,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(L([])));b&&b!==r&&n.call(b,s)&&(y=b);var w=v.prototype=d.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,a,s,u){var c=h(t[i],t,a);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==o(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var i;l(this,"_invoke",(function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){this.tryEntries.push(t)}function _(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function A(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function L(e){if(null!=e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(o(e)+" is not iterable")}return g.prototype=v,l(w,"constructor",v),l(v,"constructor",g),g.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),l(w,c,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:L(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return s(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}const c=function(){var t,e=(t=i().mark((function t(){var e,r,o,s,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=27;break;case 7:e=t.sent,r=a(e),t.prev=9,r.s();case 11:if((o=r.n()).done){t.next=18;break}return s=o.value,t.next=15,s.unregister();case 15:console.log("Service worker berhasil dihapus");case 16:t.next=11;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),r.e(t.t0);case 23:return t.prev=23,r.f(),t.finish(23);case 26:return t.abrupt("return");case 27:if("serviceWorker"in navigator){t.next=30;break}return console.log("Service Worker tidak didukung di browser ini"),t.abrupt("return");case 30:return t.prev=30,(u=new n.JK("./sw.js")).addEventListener("installed",(function(t){t.isUpdate||console.log("Service Worker berhasil diinstal")})),u.addEventListener("activated",(function(){console.log("Service Worker berhasil diaktifkan")})),u.addEventListener("controlling",(function(){console.log("Service Worker sekarang mengontrol halaman")})),u.addEventListener("waiting",(function(t){console.log("Service Worker baru menunggu untuk mengambil alih"),confirm("Pembaruan tersedia! Muat ulang untuk memperbarui aplikasi?")&&(u.messageSkipWaiting(),window.location.reload())})),t.next=38,u.register();case 38:console.log("Service worker registered"),t.next=44;break;case 41:t.prev=41,t.t1=t.catch(30),console.error("Gagal mendaftarkan service worker:",t.t1);case 44:case"end":return t.stop()}}),t,null,[[9,20,23,26],[30,41]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}()},282:(t,e,r)=>{r.d(e,{A:()=>o});var n="story_app_auth";const o={setAuth:function(t,e){localStorage.setItem(n,JSON.stringify({token:t,user:e}))},getAuth:function(){var t=localStorage.getItem(n);return t?JSON.parse(t):{token:null,user:null}},destroyAuth:function(){localStorage.removeItem(n)},isLoggedIn:function(){var t=this.getAuth(),e=t.token,r=t.user;return!!e&&!!r&&!!r.name},updateAuthMenu:function(){var t=this,e=document.getElementById("auth-menu");if(e)if(this.isLoggedIn()){var r=this.getAuth().user;if(r&&r.name){e.innerHTML='\n        <a href="#/" id="logout-button">Logout ('.concat(r.name,")</a>\n      ");var n=document.getElementById("logout-button");n&&n.addEventListener("click",(function(e){e.preventDefault(),t.destroyAuth(),window.location.href="#/login",t.updateAuthMenu()}))}else this.destroyAuth(),e.innerHTML='<a href="#/login">Masuk</a>'}else e.innerHTML='<a href="#/login">Masuk</a>'}}},448:(t,e,r)=>{r.d(e,{A:()=>c});var n=r(304),o=r(57);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function p(e,r,n,o){var i=r&&r.prototype instanceof d?r:d,a=Object.create(i.prototype);return l(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=x(s,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new A(o||[])),!0),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f={};function d(){}function g(){}function v(){}var y={};l(y,s,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(L([])));b&&b!==r&&n.call(b,s)&&(y=b);var w=v.prototype=d.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,s,u){var c=h(t[o],t,a);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==i(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){this.tryEntries.push(t)}function _(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function A(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function L(e){if(null!=e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return g.prototype=v,l(w,"constructor",v),l(v,"constructor",g),g.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),l(w,c,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:L(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function s(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,u,"next",t)}function u(t){s(i,n,o,a,u,"throw",t)}a(void 0)}))}}const c={requestPermission:function(){return u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Notification"in window){t.next=3;break}return console.error("Browser tidak mendukung notifikasi"),t.abrupt("return",!1);case 3:return console.log("Meminta izin notifikasi..."),t.next=6,Notification.requestPermission();case 6:if(e=t.sent,console.log("Hasil permintaan izin:",e),"denied"!==e){t.next=11;break}return console.warn("Izin notifikasi ditolak"),t.abrupt("return",!1);case 11:if("default"!==e){t.next=14;break}return console.warn("Pengguna menutup dialog permintaan izin"),t.abrupt("return",!1);case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))()},subscribePushNotif:function(t){var e=this;return u(a().mark((function r(){var i,s,u,c,l,p;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("Memulai proses berlangganan push notification..."),r.next=4,e.requestPermission();case 4:if(r.sent){r.next=8;break}return console.log("Izin notifikasi tidak diberikan"),r.abrupt("return",null);case 8:if("serviceWorker"in navigator){r.next=11;break}return console.error("Service Worker tidak didukung di browser ini"),r.abrupt("return",null);case 11:return console.log("Menunggu service worker siap..."),r.next=14,navigator.serviceWorker.ready;case 14:return i=r.sent,r.next=17,i.pushManager.getSubscription();case 17:if(s=r.sent,console.log("Subscription yang ada:",s),!s){r.next=22;break}return console.log("Sudah berlangganan, mengembalikan subscription yang ada"),r.abrupt("return",s);case 22:return u=n.A.PUSH_MSG_VAPID_PUBLIC_KEY,c=e._urlBase64ToUint8Array(u),console.log("Mencoba berlangganan push notification..."),r.prev=25,r.next=28,i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:c});case 28:s=r.sent,console.log("Subscription berhasil dibuat:",s),r.next=36;break;case 32:return r.prev=32,r.t0=r.catch(25),console.error("Gagal membuat subscription:",r.t0),r.abrupt("return",null);case 36:return l=s.toJSON(),p={endpoint:l.endpoint,keys:{p256dh:l.keys.p256dh,auth:l.keys.auth}},r.prev=38,r.next=41,o.A.subscribePushNotification(p,t);case 41:console.log("Subscription berhasil dikirim ke server"),r.next=47;break;case 44:r.prev=44,r.t1=r.catch(38),console.error("Gagal mengirim subscription ke server:",r.t1);case 47:return r.abrupt("return",s);case 50:return r.prev=50,r.t2=r.catch(0),console.error("Gagal berlangganan push notification:",r.t2),r.abrupt("return",null);case 54:case"end":return r.stop()}}),r,null,[[0,50],[25,32],[38,44]])})))()},unsubscribePushNotif:function(t){return u(a().mark((function e(){var r,n,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Memulai proses berhenti berlangganan push notification..."),e.next=4,navigator.serviceWorker.ready;case 4:return r=e.sent,e.next=7,r.pushManager.getSubscription();case 7:if(n=e.sent){e.next=11;break}return console.log("Tidak ada subscription yang aktif"),e.abrupt("return");case 11:return i=n.toJSON(),s={endpoint:i.endpoint},e.prev=13,e.next=16,o.A.unsubscribePushNotification(s,t);case 16:console.log("Permintaan unsubscribe berhasil dikirim ke server"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(13),console.error("Gagal mengirim permintaan unsubscribe ke server:",e.t0);case 22:return console.log("Menghapus subscription di browser..."),e.next=25,n.unsubscribe();case 25:console.log("Berhasil berhenti berlangganan push notification"),e.next=32;break;case 28:throw e.prev=28,e.t1=e.catch(0),console.error("Gagal berhenti berlangganan push notification:",e.t1),e.t1;case 32:case"end":return e.stop()}}),e,null,[[0,28],[13,19]])})))()},isPushNotificationSubscribed:function(){return u(a().mark((function t(){var e,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"serviceWorker"in navigator){t.next=4;break}return console.log("Service Worker tidak didukung di browser ini"),t.abrupt("return",!1);case 4:return console.log("Memeriksa status langganan push notification..."),t.next=7,navigator.serviceWorker.ready;case 7:return e=t.sent,t.next=10,e.pushManager.getSubscription();case 10:return r=t.sent,console.log("Status langganan:",!!r),t.abrupt("return",!!r);case 15:return t.prev=15,t.t0=t.catch(0),console.error("Gagal memeriksa status langganan push notification:",t.t0),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},_urlBase64ToUint8Array:function(t){if(!t)return console.error("base64String tidak boleh kosong"),new Uint8Array;try{for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(e),n=new Uint8Array(r.length),o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n}catch(t){return console.error("Gagal mengkonversi base64 ke Uint8Array:",t),new Uint8Array}}}},668:(t,e,r)=>{r.d(e,{A:()=>n});const n={parseActiveUrlWithCombiner:function(){var t=window.location.hash.slice(1).toLowerCase();return this._urlCombiner(t)},parseActiveUrlWithoutCombiner:function(){var t=window.location.hash.slice(1);return this._urlSplitter(t)},_urlSplitter:function(t){var e=t.split("/");return{resource:e[1]||null,id:e[2]||null,verb:e[3]||null}},_urlCombiner:function(t){var e=this._urlSplitter(t);return e.resource?"/".concat(e.resource).concat(e.id?"/:id":"").concat(e.verb?"/".concat(e.verb):""):"/"}}},687:(t,e,r)=>{r.d(e,{A:()=>u});var n=r(57),o=r(282);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function p(e,r,n,o){var i=r&&r.prototype instanceof d?r:d,a=Object.create(i.prototype);return l(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=x(s,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new A(o||[])),!0),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f={};function d(){}function g(){}function v(){}var y={};l(y,s,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(L([])));b&&b!==r&&n.call(b,s)&&(y=b);var w=v.prototype=d.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,s,u){var c=h(t[o],t,a);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==i(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){this.tryEntries.push(t)}function _(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function A(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function L(e){if(null!=e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return g.prototype=v,l(w,"constructor",v),l(v,"constructor",g),g.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),l(w,c,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,u=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<u)return this.method="next",this.arg=t,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:L(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function s(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}const u={init:function(t){var e=t.connectionStatusElement;this._connectionStatusElement=e,this._initNetworkStatus()},_initNetworkStatus:function(){var t=this;window.addEventListener("online",(function(){t._updateNetworkStatus(!0),t._syncDataWhenOnline()})),window.addEventListener("offline",(function(){t._updateNetworkStatus(!1)})),this._updateNetworkStatus(navigator.onLine),navigator.onLine&&this._syncDataWhenOnline()},_updateNetworkStatus:function(t){var e=this;this._connectionStatusElement&&(t?(this._connectionStatusElement.textContent="Online",this._connectionStatusElement.classList.remove("offline"),this._connectionStatusElement.classList.add("online"),setTimeout((function(){e._connectionStatusElement.classList.add("hidden")}),3e3)):(this._connectionStatusElement.textContent="Offline - Beberapa fitur mungkin tidak tersedia",this._connectionStatusElement.classList.remove("online","hidden"),this._connectionStatusElement.classList.add("offline")))},_syncDataWhenOnline:function(){var t,e=this;return(t=a().mark((function t(){var r,i,s,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("Checking for data to sync..."),r=o.A.getAuth(),i=r.token){t.next=6;break}return console.log("User not logged in, skipping sync"),t.abrupt("return");case 6:return console.log("Syncing pending stories..."),t.next=9,n.A.syncPendingStories(i);case 9:(s=t.sent).error?console.error("Failed to sync pending stories:",s.message):s.results&&s.results.length>0?(console.log("Sync completed:",s.message),(u=s.results.filter((function(t){return"fulfilled"===t.status&&!t.value.error})).length)>0&&(e._showSyncNotification(u),e._showToastNotification("".concat(u," cerita berhasil disinkronkan")),setTimeout((function(){"#/offline"===window.location.hash?window.location.hash="#/":window.location.reload()}),1500))):(console.log("No pending stories to sync"),"#/offline"===window.location.hash&&(window.location.hash="#/")),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Error during data sync:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,u,"next",t)}function u(t){s(i,n,o,a,u,"throw",t)}a(void 0)}))})()},_showSyncNotification:function(t){"Notification"in window&&("granted"===Notification.permission?new Notification("Story App",{body:"".concat(t," cerita berhasil disinkronkan"),icon:"/favicon.png"}):"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){"granted"===e&&new Notification("Story App",{body:"".concat(t," cerita berhasil disinkronkan"),icon:"/favicon.png"})})))},_showToastNotification:function(t){var e=document.createElement("div");e.className="toast-notification",e.textContent=t,document.body.appendChild(e),setTimeout((function(){e.classList.add("show")}),100),setTimeout((function(){e.classList.remove("show"),setTimeout((function(){document.body.removeChild(e)}),300)}),3e3)}}},693:(t,e,r)=>{function n(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=L.map(t).setView(e,13),i={OpenStreetMap:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Satelit:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Terrain:L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})};i.OpenStreetMap.addTo(o),n&&L.control.layers(i).addTo(o);var a=L.marker(e).addTo(o);return r&&a.bindPopup(r).openPopup(),o}function o(t){var e=[-6.2,106.816666],r=L.map(t).setView(e,5),n={OpenStreetMap:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Satelit:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Terrain:L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})};n.OpenStreetMap.addTo(r),L.control.layers(n).addTo(r);var o=L.marker(e,{draggable:!0}).addTo(r),i=document.getElementById("selectedLocation"),a=function(t){i&&(i.textContent="Lokasi dipilih: ".concat(t.lat.toFixed(6),", ").concat(t.lng.toFixed(6)))};return o.on("dragend",(function(t){a(o.getLatLng())})),r.on("click",(function(t){o.setLatLng(t.latlng),a(t.latlng)})),{map:r,marker:o,updateLocation:a}}function i(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=L.map(t).setView([-2.5489,118.0149],5),o={OpenStreetMap:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Satelit:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Terrain:L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})};o.OpenStreetMap.addTo(n),r&&L.control.layers(o).addTo(n);var i=L.layerGroup();e.forEach((function(t){if(t.lat&&t.lon){var e=L.marker([t.lat,t.lon]),r='\n        <div class="map-popup">\n          <h4>'.concat(t.name,'</h4>\n          <img src="').concat(t.photoUrl,'" alt="Foto dari ').concat(t.name,'" style="width:100%;max-width:200px;">\n          <p>').concat(t.description.substring(0,100)).concat(t.description.length>100?"...":"",'</p>\n          <a href="#/detail/').concat(t.id,'" class="popup-link">Lihat Detail</a>\n        </div>\n      ');e.bindPopup(r),i.addLayer(e)}})),i.addTo(n);var a=Array.from(i.getLayers());if(a.length>0){var s=L.featureGroup(a).getBounds();n.fitBounds(s,{padding:[50,50]})}return n}r.d(e,{Gb:()=>o,KH:()=>i,vU:()=>n})},761:(t,e,r)=>{r.d(e,{A:()=>p});var n=r(178),o=r(398),i=r(450),a=r(63),s=r(609),u=r(26),c=r(610),l=r(786);const p={"/":new n.A,"/detail/:id":new o.A,"/add":new i.A,"/login":new a.A,"/register":new s.A,"/about":new u.A,"/not-found":new c.A,"/saved":new l.A}},869:(t,e,r)=>{r.d(e,{KI:()=>a,NI:()=>s,Ze:()=>o,jk:()=>n,mP:()=>i});var n=function(t){return'\n  <div class="story-item">\n    <div class="story-item__header">\n      <img class="story-item__header__photo" src="'.concat(t.photoUrl,'" alt="Foto dari ').concat(t.name,'" crossorigin="anonymous">\n    </div>\n    <div class="story-item__content">\n      <h3 class="story-item__title"><a href="#/detail/').concat(t.id,'">').concat(t.name,'</a></h3>\n      <p class="story-item__description">').concat(t.description,'</p>\n      <p class="story-item__date">').concat(new Date(t.createdAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),"</p>\n    </div>\n  </div>\n")},o=function(t){return'\n  <h2 class="story__title">'.concat(t.name,'</h2>\n  <img class="story__poster" src="').concat(t.photoUrl,'" alt="Foto dari ').concat(t.name,'" crossorigin="anonymous">\n  <div class="story__info">\n    <h3>Informasi</h3>\n    <h4>Tanggal Dibuat</h4>\n    <p>').concat(new Date(t.createdAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),"</p>\n    <h4>Deskripsi</h4>\n    <p>").concat(t.description,"</p>\n  </div>\n")},i=function(){return'\n  <div class="login-form">\n    <h2>Masuk</h2>\n    <form id="loginForm">\n      <div class="form-group">\n        <label for="email">Email</label>\n        <input type="email" id="email" name="email" required>\n      </div>\n      <div class="form-group">\n        <label for="password">Password</label>\n        <input type="password" id="password" name="password" required>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary">Masuk</button>\n      </div>\n    </form>\n    <p>Belum punya akun? <a href="#/register">Daftar di sini</a></p>\n  </div>\n'},a=function(){return'\n  <div class="register-form">\n    <h2>Daftar</h2>\n    <form id="registerForm">\n      <div class="form-group">\n        <label for="name">Nama</label>\n        <input type="text" id="name" name="name" required>\n      </div>\n      <div class="form-group">\n        <label for="email">Email</label>\n        <input type="email" id="email" name="email" required>\n      </div>\n      <div class="form-group">\n        <label for="password">Password</label>\n        <input type="password" id="password" name="password" required minlength="6">\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary">Daftar</button>\n      </div>\n    </form>\n    <p>Sudah punya akun? <a href="#/login">Masuk di sini</a></p>\n  </div>\n'},s=function(){return'\n  <div class="add-story-form">\n    <h2 class="content__heading">Tambah Cerita Baru</h2>\n    <form id="addStoryForm">\n      <div class="form-group">\n        <label for="description">Deskripsi</label>\n        <textarea id="description" name="description" required></textarea>\n      </div>\n      \n      <div class="form-group">\n        <label for="photo">Foto</label>\n        <input type="file" id="photo" name="photo" accept="image/*" required>\n        <div class="camera-container">\n          <video id="cameraPreview" autoplay playsinline style="display:none;"></video>\n          <canvas id="photoCanvas" style="display:none;"></canvas>\n          <div class="camera-buttons">\n            <button type="button" id="startCamera" class="btn">Buka Kamera</button>\n            <button type="button" id="capturePhoto" class="btn" disabled>Ambil Foto</button>\n            <button type="button" id="retakePhoto" class="btn" style="display:none;">Ambil Ulang</button>\n          </div>\n          <div id="photoPreview" class="photo-preview"></div>\n        </div>\n      </div>\n      \n      <div class="form-group">\n        <label for="location">Lokasi (Opsional)</label>\n        <div id="mapContainer" class="map-container">\n          <div id="addStoryMap" class="add-story-map"></div>\n          <p id="selectedLocation">Klik pada peta untuk memilih lokasi</p>\n        </div>\n      </div>\n      \n      <div class="form-group form-action">\n        <button type="submit" class="btn btn-primary">Tambah Cerita</button>\n      </div>\n    </form>\n  </div>\n'}}}]);